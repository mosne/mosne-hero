(()=>{"use strict";const e=window.wp.blocks,o=window.wp.hooks,i=window.wp.compose,l=window.wp.blockEditor,r=window.wp.components,t=window.wp.i18n,n=window.wp.data,a=window.wp.element,s=window.wp.blob,m=window.ReactJSXRuntime,c=r.FocalPointPicker||null;(0,e.registerBlockVariation)("core/cover",{name:"mosne-hero-cover",title:(0,t.__)("Hero Cover (Mobile & Desktop)","mosne-hero"),description:(0,t.__)("Cover block with separate mobile and desktop background images.","mosne-hero"),attributes:{variation:"mosne-hero-cover"},isDefault:!1,scope:["inserter","transform"]});const d=(0,i.createHigherOrderComponent)(e=>o=>{const{name:i,attributes:d,setAttributes:h,clientId:u}=o;if(!e||"function"!=typeof e)return null;if("core/cover"!==i)return(0,m.jsx)(e,{...o});if("mosne-hero-cover"!==d.variation)return(0,m.jsx)(e,{...o});const{mobileImageId:g=0,mobileImageUrl:b="",mobileFocalPoint:p,mobileImageSize:_="large",mobileImageAlt:w="",highFetchPriority:v=!1}=d,f=(0,n.useSelect)(e=>{if(!g||0===g)return null;try{const o=e("core").getMedia(g);return o&&void 0!==o?o:null}catch(e){return null}},[g]),I="undefined"!=typeof mosneHeroData&&mosneHeroData.imageSizes?mosneHeroData.imageSizes:[{label:(0,t.__)("Full Size","mosne-hero"),value:"full"},{label:(0,t.__)("Large","mosne-hero"),value:"large"},{label:(0,t.__)("Medium Large","mosne-hero"),value:"medium_large"},{label:(0,t.__)("Medium","mosne-hero"),value:"medium"},{label:(0,t.__)("Thumbnail","mosne-hero"),value:"thumbnail"}],x=(e,o)=>e?"full"===o?e.source_url||e.url||"":e.media_details?.sizes?.[o]?.source_url?e.media_details.sizes[o].source_url:e.source_url||e.url||"":"";(0,a.useEffect)(()=>{if(f){const e=x(f,_||"large");e&&h({mobileImageUrl:e})}},[f,_]);const y=()=>{h({mobileImageId:0,mobileImageUrl:"",mobileFocalPoint:void 0,mobileImageAlt:""})},C=p||{x:.5,y:.5};return r.PanelBody&&l.MediaUpload&&l.MediaUploadCheck&&r.SelectControl&&r.Button&&l.InspectorControls?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(e,{...o}),(0,m.jsx)(l.InspectorControls,{children:(0,m.jsxs)(r.PanelBody,{title:(0,t.__)("Mobile Image","mosne-hero"),initialOpen:!0,children:[(0,m.jsx)(r.SelectControl,{label:(0,t.__)("Mobile Image Size","mosne-hero"),value:_||"large",options:I,onChange:e=>{if(h({mobileImageSize:e}),f){const o=x(f,e);o&&h({mobileImageUrl:o})}},help:(0,t.__)("Choose the image size for mobile view. If no mobile image is selected, the desktop image will be used with this size.","mosne-hero")}),(0,m.jsx)(r.ToggleControl,{label:(0,t.__)("High Fetch Priority","mosne-hero"),checked:v,onChange:e=>h({highFetchPriority:e}),help:(0,t.__)("Prioritize loading of both desktop and mobile images. Use for above-the-fold hero images.","mosne-hero")}),(0,m.jsx)(l.MediaUploadCheck,{children:(0,m.jsx)(l.MediaUpload,{onSelect:e=>{const o=x(e,_||"large");h({variation:d.variation||"mosne-hero-cover",mobileImageId:e.id,mobileImageUrl:o,mobileFocalPoint:p||{x:.5,y:.5},mobileImageSize:_||"large",mobileImageAlt:w||e.alt||""})},allowedTypes:["image"],value:g>0?g:void 0,render:({open:e})=>{if("function"!=typeof e)return null;const o=b&&"string"==typeof b&&!(0,s.isBlobURL)(b);return(0,m.jsx)("div",{children:o?(0,m.jsxs)(m.Fragment,{children:[c&&(0,m.jsx)(c,{label:(0,t.__)("Focal Point Picker","mosne-hero"),url:b,value:C,onChange:e=>{e&&"object"==typeof e&&"number"==typeof e.x&&"number"==typeof e.y&&h({mobileFocalPoint:e})}}),(0,m.jsx)(r.TextControl,{label:(0,t.__)("Alt Text","mosne-hero"),value:w||"",onChange:e=>h({mobileImageAlt:e}),help:(0,t.__)("Describe the purpose of the image. Leave empty to use the image's default alt text.","mosne-hero")}),(0,m.jsx)(r.Button,{onClick:y,variant:"secondary",isDestructive:!0,style:{marginTop:"10px",width:"100%"},children:(0,t.__)("Remove mobile image","mosne-hero")})]}):(0,m.jsx)(r.Button,{onClick:e,variant:"primary",children:g&&g>0?(0,t.__)("Replace mobile image","mosne-hero"):(0,t.__)("Select mobile image","mosne-hero")})})}})})]})},"mosne-hero-mobile-image")]}):(0,m.jsx)(e,{...o})},"withMobileImageControls");(0,o.addFilter)("editor.BlockEdit","mosne-hero/cover-with-mobile-image",d,20)})();